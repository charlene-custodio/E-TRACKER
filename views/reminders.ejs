<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reminders | E-TRACKER</title>
  <link rel="stylesheet" href="/css/reminders.css" />
  <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
  <header class="navbar">
    <div class="nav-title">
      <img src="/images/logo.png" alt="Logo" class="logo"/>
      <div class="app-name">
        <h2>E-TRACKER</h2>
        <p>Anecdotal Report & Student Record Tracker</p>
      </div>
    </div>
        <div class="nav-right">
      <!-- <div class="notification">
        <span class="icon">ğŸ””</span>
        <span class="notif-count">12</span>
      </div> -->
      <div class="admin-info">
        <span style="font-weight: 800;"><%= user.role || "User" %></span>
        <span><%= user.username || "User" %></span>
      </div>
    </div>
  </header>
  <div class="container">
<aside class="sidebar">
  <a href="/dashboard" class="sidebar-link">
    <span class="icon">
      <!-- Lucide: layout-dashboard -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard" viewBox="0 0 24 24">
        <rect x="3" y="3" width="7" height="9" rx="1"/>
        <rect x="14" y="3" width="7" height="5" rx="1"/>
        <rect x="14" y="12" width="7" height="9" rx="1"/>
        <rect x="3" y="16" width="7" height="5" rx="1"/>
      </svg>
    </span>
    <span>Dashboard</span>
  </a>
  <a href="/reminders" class="sidebar-link  active">
    <span class="icon">
      <!-- Lucide: bell -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell" viewBox="0 0 24 24">
        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
      </svg>
    </span>
    <span>Reminders</span>
  </a>
  <a href="/logout" class="sidebar-link logout-link">
    <span class="icon">
      <!-- Lucide: log-out -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out" viewBox="0 0 24 24">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
        <polyline points="16 17 21 12 16 7"/>
        <line x1="21" y1="12" x2="9" y2="12"/>
      </svg>
    </span>
    <span>Logout</span>
  </a>
</aside>
<main class="main-content">
  <div class="reminders-header-row">
    <div>
      <h1 class="reminders-title">Reminders</h1>
      <p class="reminders-subtitle">Stay on track, stay organized</p>
    </div>
    <button class="add-reminder-btn" id="openAddReminderModal">+ Add New Reminder</button>
  </div>
 <div class="reminders-grid" id="remindersGrid">
  <% if (reminders && reminders.length) { %>
    <% reminders.forEach(function(reminder) { %>
      <div class="reminder-card<%= reminder.is_done ? ' reminder-done' : '' %>" data-id="<%= reminder.id %>" data-is-done="<%= reminder.is_done %>">
        <div class="reminder-card-header">
          <span class="reminder-badge"><%= reminder.title %></span>
          <div class="reminder-actions">
            <button class="card-action-btn" title="Edit"><span>âœï¸</span></button>
            <button class="card-action-btn" title="Delete"><span>ğŸ—‘ï¸</span></button>
            <button class="card-action-btn" title="Mark as Done"><span>âœ”ï¸</span></button>
          </div>
        </div>
        <div class="reminder-card-body">
          <p class="reminder-desc"><strong>Description:</strong> <%= reminder.description %></p>
          <p class="reminder-date"><strong>Remind At:</strong> <span>ğŸ“… <%= reminder.remind_at ? new Date(reminder.remind_at).toLocaleString() : '-' %></span></p>
          <p class="reminder-date"><strong>Created At:</strong> <%= reminder.created_at ? new Date(reminder.created_at).toISOString().slice(0,10) : '-' %></p>
          <% if (reminder.is_done) { %>
            <div class="done-badge">Done</div>
          <% } %>
        </div>
      </div>
    <% }); %>
  <% } else { %>
    <div class="reminders-empty">No reminders yet. Click <strong>+ Add New Reminder</strong> to create one!</div>
  <% } %>
</div>
  <!-- Modal -->
  <div id="addReminderModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h2>Add New Reminder</h2>
      <form id="addReminderForm" autocomplete="off">
        <div class="input-group">
          <label>Title</label>
          <input type="text" name="title" required maxlength="70"/>
        </div>
        <div class="input-group">
          <label>Description</label>
          <textarea name="description" rows="3" maxlength="300"></textarea>
        </div>
        <div class="input-group">
          <label>Remind At</label>
          <input type="datetime-local" name="remind_at"/>
        </div>
        <div class="modal-actions">
          <button type="submit" class="primary-btn">Save</button>
          <button type="button" class="secondary-btn" id="closeAddReminderModal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  <div id="toast" style="display:none;"></div>
</main>
  </div>
  <script src="/js/reminders.js"></script>
</body>
</html>